(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Product:()=>h,default:()=>f});const n=window.jQuery;var i=t.n(n);const a=window.wcPPCP.utils,r=window.lodash,o=window.wcPPCP.actions;var u=t.n(o);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.actions=new(u()),this.data=this.default_data=e,this.variation=!1,i()(document.body).on("change",'[name="quantity"]',this.onQuantityChange.bind(this)),i()(document.body).on("found_variation",this.foundVariation.bind(this)),i()(document.body).on("reset_data",this.resetVariationData.bind(this))}var e,n;return e=t,n=[{key:"needsShipping",value:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.needsShipping}},{key:"getLineItems",value:function(){return this.data.lineItems||[]}},{key:"isVariationSelected",value:function(){return!!this.variation}},{key:"onQuantityChange",value:function(t){var e=this;null!=t&&t.isTrigger?setTimeout((function(){e.actions.doAction("quantity_change",e.getQuantity(),e)}),50):this.actions.doAction("quantity_change",this.getQuantity(),this)}},{key:"foundVariation",value:function(t,e){this.variation=e;var n=c({},this.data);this.data=c(c({},this.data),{price:e.display_price,needsShipping:!e.is_virtual}),this.actions.doAction("found_variation",!(0,r.isEqual)(this.data,n),this)}},{key:"resetVariationData",value:function(){this.variation=null,this.data=this.default_data,this.actions.doAction("reset_variation",this)}},{key:"getQuantity",value:function(){return parseInt(i()('[name="quantity"]').val())||0}},{key:"getPrice",value:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.price}},{key:"getTotal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",e=this.getQuantity()*this.getPrice();return"string"===t?e.toString():e}},{key:"getTotalCents",value:function(){var t;return parseInt((null===(t=this.data)||void 0===t?void 0:t.totalCents)||0)}},{key:"isVariableProduct",value:function(){return i()('[name="variation_id"]').length>0}},{key:"isVariableProductSelected",value:function(){var t=i()('input[name="variation_id"]').val();return!!t&&"0"!==t}},{key:"getVariationData",value:function(){if(this.isVariableProduct()){var t=this.variation?this.variation.attributes:{},e=document.querySelectorAll('.variations [name^="attribute_"]');return e&&e.forEach((function(e){e.name in t&&""!==t[e.name]||(t[e.name]=e.value||"")})),t}return null}},{key:"getId",value:function(){var t;return parseInt(null===(t=this.data)||void 0===t?void 0:t.id)}},{key:"getVariationId",value:function(){return this.variation?this.variation.variation_id:i()('[name="variation_id"]').val()}}],n&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const f=new h((0,a.getSetting)("product"));(this.wcPPCP=this.wcPPCP||{}).product=e})();
//# sourceMappingURL=product.js.map